<?php
$i=1;
while ($resultat = mysqli_fetch_array($result)) {
  // Définir la question et l'id dans des variables pour ensuite les récupérer dans le fichier formulaireAjout.php
  $uneQuestion = $resultat['question'];
    $_SESSION['laQuestion']= $uneQuestion;
    $unId = $i;
    $_SESSION['id'] = $unId;
  
  ?>
  <!-- 1 Module Accordéon-->
<div class="accordion-item">
  <h2 class="accordion-header" id="heading<?php echo $i; ?>">
    <button
      class="accordion-button text-black"
      type="button"
      data-mdb-toggle="collapse"
      data-mdb-target="#collapse<?php echo $i; ?>"
      aria-expanded="<?php echo ($i==1)? 'true': 'false'; ?>"
      aria-controls="collapse<?php echo $i; ?>"
    >
    <?php
    echo $uneQuestion;
    echo $unId
?>
<!-- Ligne îcone -->
<?php
    if ($resultat['reponse']) { 
      echo '<i style="color:green" class="fas fa-check fa-lg ms-2"></i>';
      }
    else {
      echo '<i style="color:red" class="fas fa-times fa-lg ms-2"></i>';
    }
   ?>
<!-- Fin lignes îcone -->
    </button>
  </h2>
  <div id="collapse<?php echo $i; ?>" class="accordion-collapse collapse <?php if($i==1) echo 'show'; ?>" aria-labelledby="heading<?php echo $i; ?>" data-mdb-parent="#accordionExample">
    <div class="accordion-body">
    <!-- Si le résultat à une réponse et un prénom, alors afficher les deux + le bouton -->
    <?php
    if ($resultat['reponse']) { 
      if ($resultat['prenom']) {
        echo "Prénom : " . $resultat['prenom'] . "<br>"; 
      }
      // Si le résultat a une réponse mais pas de prénom, afficher la réponse + le bouton
      echo $resultat['reponse']; 
      echo '<br><br><a href="formulaireAjout.php"><input type="submit" name="boutonReponse" class="btn btn-primary" value="Ajouter une réponse"></input></a>';
      }
      // Si le résultat n'a pas de réponse, afficher juste le bouton
    else {
      echo '<a href="formulaireAjout.php"><input type="submit" name="boutonReponse" class="btn btn-primary" value="Ajouter une réponse"></input></a>';
    }
   ?>
    </div>
  </div>
</div>
<?php $i++ 
;}
?>